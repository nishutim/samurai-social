"use strict";(self.webpackChunksamurai_social=self.webpackChunksamurai_social||[]).push([[397],{6397:function(n,e,r){r.r(e),r.d(e,{default:function(){return jn}});var t=r(1413),o=r(885),u=r(2791),s=r(6731),a=r(8660),i=function(n){return n.users.isLoading},c=function(n){return n.users.currentPageNum},l=function(n){return n.users.pageSize},f=function(n){return n.users.filter},d=function(n){return n.users.users},p=function(n){return n.users.totalCount},h=function(n){return n.users.error},m=r(8418),x=r(4165),g=r(4925),Z=r(5861),v=r(3144),C=r(5671),w=r(5143),k=(0,v.Z)((function n(){(0,C.Z)(this,n)}));k.fetchUsers=(0,Z.Z)((0,x.Z)().mark((function n(){var e,r,t,o,u,s,a,i=arguments;return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:1,r=i.length>1&&void 0!==i[1]?i[1]:10,t=i.length>2?i[2]:void 0,o=t.term?"&term=".concat(t.term):"",u="null"!==t.friendsOnly?"&friend=".concat(t.friendsOnly):"",n.next=7,w.Z.get("/users?count=".concat(r,"&page=").concat(e)+o+u);case 7:return s=n.sent,a=s.data,n.abrupt("return",a);case 10:case"end":return n.stop()}}),n)})));var b=k,j=(0,v.Z)((function n(){(0,C.Z)(this,n)}));j.follow=function(){var n=(0,Z.Z)((0,x.Z)().mark((function n(e){var r,t;return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.Z.post("/follow/"+e);case 2:return r=n.sent,t=r.data,n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j.unfollow=function(){var n=(0,Z.Z)((0,x.Z)().mark((function n(e){var r,t;return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.Z.delete("/follow/"+e);case 2:return r=n.sent,t=r.data,n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();var y,P,S,N,O,F,U,X,$,z,E,B,T,L=j,A=r(5748),I=["error"],M=function(n,e,r){return function(){var t=(0,Z.Z)((0,x.Z)().mark((function t(o){var u,s,a;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(m.X.fetchUsersStarted()),t.prev=1,t.next=4,b.fetchUsers(n,e,r);case 4:u=t.sent,s=u.error,a=(0,g.Z)(u,I),o(s?m.X.fetchUsersFail(s):m.X.fetchUsersSuccess(a)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),o(m.X.fetchUsersFail(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(n){return t.apply(this,arguments)}}()},_=function(n){return function(){var e=(0,Z.Z)((0,x.Z)().mark((function e(r){var t;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.follow(n);case 3:(t=e.sent).resultCode===A.T.SUCCESS?r(m.X.followUserSuccess(n)):alert(t.messages[0]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},q=function(n){return function(){var e=(0,Z.Z)((0,x.Z)().mark((function e(r){var t;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.unfollow(n);case 3:(t=e.sent).resultCode===A.T.SUCCESS?r(m.X.unfollowUserSuccess(n)):alert(t.messages[0]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}()},G=r(8120),R=r(2066),V=r(4615),D=r(2424),H=r(9785),J=r(168),K=r(6444),Q=K.ZP.li(y||(y=(0,J.Z)(["\n   padding: 20px 0;\n\n   &:not(:last-child) {\n      border-bottom: 1px solid ",";\n   }\n"])),(function(n){return n.theme.colors.$lightGray})),W=K.ZP.div(P||(P=(0,J.Z)(["\n   display: flex;\n   align-items: center;\n"]))),Y=K.ZP.div(S||(S=(0,J.Z)(["\n   display: flex;\n   flex-direction: column;\n   margin-right: 30px;\n"]))),nn=(0,K.ZP)(H.qE)(N||(N=(0,J.Z)(["\n   height: 70px;\n   width: 70px;\n   margin-bottom: 15px;\n   border: 1px solid ",";\n   border-radius: 50%;\n\n   img {\n      border-radius: 50%;\n   }\n"])),(function(n){return n.theme.colors.$gray})),en=K.ZP.div(O||(O=(0,J.Z)(["\n   flex: 1 1 auto;\n   display: flex;\n   flex-direction: column;\n"]))),rn=K.ZP.h4(F||(F=(0,J.Z)(["\n   margin-bottom: 5px;\n   font-size: 22px;\n   font-weight: 600;\n   color: ",";\n"])),(function(n){return n.theme.colors.$green})),tn=K.ZP.p(U||(U=(0,J.Z)(["\n   font-size: 20px;\n   font-weight: 500;\n   word-break: break-word;\n   color: ",";\n"])),(function(n){return n.theme.colors.$gray})),on=r(184),un=u.memo((function(n){var e=n.user,r=n.toggleFollowing,t=e.id,a=e.name,i=e.photos,c=e.status,l=e.followed,f=i.small||V,d=l?"Unfollow":"Follow",p=c||"I don't have a status",h=(0,u.useState)(!1),m=(0,o.Z)(h,2),g=m[0],v=m[1],C=function(){var n=(0,Z.Z)((0,x.Z)().mark((function n(){return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.next=3,r(t,l);case 3:v(!1);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,on.jsx)(Q,{children:(0,on.jsxs)(W,{children:[(0,on.jsxs)(Y,{children:[(0,on.jsx)(s.OL,{to:D.n.PROFILE+"/".concat(t),children:(0,on.jsx)(nn,{children:(0,on.jsx)("img",{src:f,alt:"Avatar"})})}),(0,on.jsx)(H.zx,{p:"0px 5px",disabled:g,onClick:C,children:d})]}),(0,on.jsxs)(en,{children:[(0,on.jsx)(rn,{children:a}),(0,on.jsx)(tn,{children:p})]})]})})})),sn=un,an=K.ZP.ul(X||(X=(0,J.Z)(["\n   flex: 1 1 auto;\n   display: flex;\n   flex-direction: column;\n"]))),cn=u.memo((function(n){var e=n.users,r=n.toggleFollowing;return(0,on.jsx)(an,{children:e.map((function(n){return(0,on.jsx)(sn,{user:n,toggleFollowing:r},n.id)}))})})),ln=r(1185),fn=function(n,e){for(var r=[],t=n;t<=e;t++)r.push(t);return r},dn=K.ZP.div($||($=(0,J.Z)(["\n   display: flex;\n   justify-content: center;\n"]))),pn=(0,K.ZP)(ln.Z.Item)(z||(z=(0,J.Z)(["\n   & .page-link {\n      color: ",";\n   }\n\n   &.active .page-link {\n      color: #fff;\n      background-color: ",";\n      border-color: ",";\n   }\n"])),(function(n){return n.theme.colors.$orange}),(function(n){return n.theme.colors.$orange}),(function(n){return n.theme.colors.$orange})),hn=(0,K.ZP)(ln.Z.Prev)(E||(E=(0,J.Z)(["\n   & .page-link {\n      color: ",";\n   }\n\n   &.disabled .page-link {\n      color: ","\n   }\n"])),(function(n){return n.theme.colors.$orange}),(function(n){return n.theme.colors.$gray})),mn=(0,K.ZP)(ln.Z.Next)(B||(B=(0,J.Z)(["\n   & .page-link {\n      color: ",";\n   }\n\n   &.disabled .page-link {\n      color: ","\n   }\n"])),(function(n){return n.theme.colors.$orange}),(function(n){return n.theme.colors.$gray})),xn=u.memo((function(n){var e=n.totalCount,r=n.currentPageNum,t=n.pageSize,o=void 0===t?10:t,u=n.portionSize,s=void 0===u?10:u,a=n.currentPortionNum,i=n.onPageChange,c=n.onPrevBtnClick,l=n.onNextBtnClick,f=Math.ceil(e/o)||1,d=Math.ceil(f/s),p=a*o-o+1,h=fn(p,a===d?f:a*o),m=1===a,x=a===d;return(0,on.jsx)(dn,{children:(0,on.jsxs)(ln.Z,{children:[(0,on.jsx)(hn,{disabled:m,onClick:function(){c(p-o)}}),h.map((function(n){return(0,on.jsx)(pn,{active:r===n,onClick:function(){var e;(e=n)!==r&&i(e)},children:n},n)})),(0,on.jsx)(mn,{disabled:x,onClick:function(){l(p+o)}})]})})})),gn=r(5705),Zn=r(2936),vn=K.ZP.div(T||(T=(0,J.Z)(["\n   margin-bottom: 20px;\n"]))),Cn=u.memo((function(n){var e=n.handleSubmit,r=n.filter,t=(0,u.useState)(!1),s=(0,o.Z)(t,2),a=s[0],i=s[1],c=(0,gn.TA)({initialValues:{term:r.term,friendsOnly:r.friendsOnly},onSubmit:function(){var n=(0,Z.Z)((0,x.Z)().mark((function n(r){return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(!0),n.next=3,e(r);case 3:i(!1);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()});return(0,on.jsx)(vn,{children:(0,on.jsxs)(Zn.Z,{onSubmit:c.handleSubmit,className:"d-flex flex-row justify-content-start gap-2",children:[(0,on.jsx)(Zn.Z.Control,{type:"text",name:"term",value:c.values.term,onChange:c.handleChange,placeholder:"Search..."}),(0,on.jsxs)(Zn.Z.Select,{name:"friendsOnly",value:c.values.friendsOnly,onChange:c.handleChange,children:[(0,on.jsx)("option",{value:"null",children:"All users"}),(0,on.jsx)("option",{value:"true",children:"Friends only"}),(0,on.jsx)("option",{value:"false",children:"Not friends"})]}),(0,on.jsx)(H.zx,{disabled:a,type:"submit",children:"Find"})]})})})),wn=Cn,kn=function(n){var e=n.isLoading,r=n.currentPageNum,t=n.pageSize,s=n.filter,i=n.users,c=n.totalCount,l=n.setSearchParams,f=(0,u.useState)(1),d=(0,o.Z)(f,2),p=d[0],h=d[1],g=(0,a.T)();(0,u.useEffect)((function(){h(Math.ceil(r/t))}),[]),(0,u.useEffect)((function(){var n={};1!==r&&(n.page=String(r)),s.term&&(n.term=s.term),"null"!==s.friendsOnly&&(n.friend=s.friendsOnly),l(n)}),[r,s]);var v=(0,u.useCallback)((function(n){g(m.X.setCurrentPageNum(n)),g(M(n,t,s))}),[t,s]),C=(0,u.useCallback)((function(n){h((function(n){return n-1})),v(n)}),[v]),w=(0,u.useCallback)((function(n){h((function(n){return n+1})),v(n)}),[v]),k=(0,u.useCallback)(function(){var n=(0,Z.Z)((0,x.Z)().mark((function n(e){return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(s.term!==e.term||s.friendsOnly!==e.friendsOnly),s.term===e.term&&s.friendsOnly===e.friendsOnly){n.next=7;break}return g(m.X.setCurrentPageNum(1)),h(1),g(m.X.setFilter(e)),n.next=7,g(M(1,t,e));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,s]),b=(0,u.useCallback)(function(){var n=(0,Z.Z)((0,x.Z)().mark((function n(e,r){var t;return(0,x.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=r?q:_,n.next=3,g(t(e));case 3:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),[]);return(0,on.jsx)(R.T,{children:(0,on.jsxs)(R.x,{children:[(0,on.jsx)(wn,{handleSubmit:k,filter:s}),(0,on.jsx)(xn,{totalCount:c,currentPageNum:r,currentPortionNum:p,onPageChange:v,onPrevBtnClick:C,onNextBtnClick:w}),e?(0,on.jsx)(G.Z,{}):(0,on.jsx)(cn,{users:i,toggleFollowing:b}),(0,on.jsx)(xn,{totalCount:c,currentPageNum:r,currentPortionNum:p,onPageChange:v,onPrevBtnClick:C,onNextBtnClick:w})]})})},bn=r(8112),jn=function(){var n=(0,a.C)(i),e=(0,a.C)(c),r=(0,a.C)(l),x=(0,a.C)(f),g=(0,a.C)(d),Z=(0,a.C)(p),v=(0,a.C)(h),C=(0,s.lr)(),w=(0,o.Z)(C,2),k=w[0],b=w[1],j=(0,a.T)();return(0,u.useEffect)((function(){var n=k.get("page"),o=k.get("term"),u=k.get("friend"),s=Number(n)||e,a=x;o&&(a=(0,t.Z)((0,t.Z)({},a),{},{term:o})),u&&(a=(0,t.Z)((0,t.Z)({},a),{},{friendsOnly:u})),j(m.X.setCurrentPageNum(s)),j(m.X.setFilter(a)),j(M(s,r,a))}),[]),g?v?(0,on.jsx)(bn.Z,{error:v,onPage:!0}):(0,on.jsx)(kn,{isLoading:n,currentPageNum:e,pageSize:r,filter:x,users:g,totalCount:Z,setSearchParams:b}):(0,on.jsx)(G.Z,{})}},4615:function(n,e,r){n.exports=r.p+"static/media/default-user-photo.df06d9f651d45b9de774.jpg"}}]);
//# sourceMappingURL=397.d35e0628.chunk.js.map